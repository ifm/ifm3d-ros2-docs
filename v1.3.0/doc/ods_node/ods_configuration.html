<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuring ODS &mdash; ifm3d-ros2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=5800d392" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=d9f55abb"></script>
        <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
        <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Launch the ODS node" href="ods_launch.html" />
    <link rel="prev" title="ODS node" href="index_ods_node.html" />
    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZ08KXKV1G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZZ08KXKV1G');
    </script> -->
     

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ifm3d-ros2
          </a>
              <div class="version">
                v1.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camera_node/index_camera_node.html">Camera node</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index_ods_node.html">ODS node</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">    ODS configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-vision-assistant">Using the Vision Assistant</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-config-service">Using the <code class="docutils literal notranslate"><span class="pre">Config</span></code> service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-config-file-parameter">Using the <code class="docutils literal notranslate"><span class="pre">config_file</span></code> parameter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-configuration">Example Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#path-resolution">Path Resolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#re-configuration">Re-configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ods_launch.html">    Launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods_topics.html">    Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods_transforms.html">    Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods_params.html">    Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diagnostic.html">Diagnostic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ifm3d-ros2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index_ods_node.html">ODS node</a></li>
      <li class="breadcrumb-item active">Configuring ODS</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/doc/ods_node/ods_configuration.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuring-ods">
<h1>Configuring ODS<a class="headerlink" href="#configuring-ods" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ifm’s Obstacle Detection Solution (ODS) is supported in <code class="docutils literal notranslate"><span class="pre">ifm3d-ros2</span></code> version 1.2.0 and above.</p>
</div>
<p>ODS is an application that runs on the O3R platform, that provides the ability to detect the position of obstacles within the camera field of view.
For more details on ODS, refer to <a class="reference external" href="https://ifm3d.com/latest/ODS/index_ods.html">the ODS documentation on ifm3d.com</a>.</p>
<p>There are multiple ways to configure ODS parameters, which are described in the following subsections.</p>
<section id="using-the-vision-assistant">
<h2>Using the Vision Assistant<a class="headerlink" href="#using-the-vision-assistant" title="Link to this heading"></a></h2>
<p>We typically recommend to use the ifm Vision Assistant, which is ifm’s official GUI for interfacing with all the vision products.</p>
<p>To get started with ODS in the Vision Assistant, refer to <a class="reference external" href="https://ifm3d.com/latest/ODS/getting_started.html">the ODS getting started documentation</a>.
After following these instructions, you will have set up and properly configured an ODS application, and you will be ready to launch the ODS node.</p>
</section>
<section id="using-the-config-service">
<h2>Using the <code class="docutils literal notranslate"><span class="pre">Config</span></code> service<a class="headerlink" href="#using-the-config-service" title="Link to this heading"></a></h2>
<p>It is also possible to configure an application directly using the <code class="docutils literal notranslate"><span class="pre">ifm3d-ros2</span></code> service <code class="docutils literal notranslate"><span class="pre">Config</span></code>.
We recommend to use this method when re-configuring the application at runtime, for example to change the active ports.</p>
<p>In this case, you can use the following command.
This will switch the <code class="docutils literal notranslate"><span class="pre">activePorts</span></code> parameter of the application <code class="docutils literal notranslate"><span class="pre">app0</span></code> to <code class="docutils literal notranslate"><span class="pre">[&quot;port3&quot;]</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/ifm3d/ods/Config<span class="w"> </span>ifm3d_ros2/srv/Config<span class="w"> </span><span class="s2">&quot;{json: &#39;{\&quot;applications\&quot;:{\&quot;instances\&quot;:{\&quot;app0\&quot;:{\&quot;configuration\&quot;:{\&quot;activePorts\&quot;:[\&quot;port3\&quot;]}}}}}&#39;}&quot;</span>
requester:<span class="w"> </span>making<span class="w"> </span>request:<span class="w"> </span>ifm3d_ros2.srv.Config_Request<span class="o">(</span><span class="nv">json</span><span class="o">=</span><span class="s1">&#39;{&quot;applications&quot;:{&quot;instances&quot;:{&quot;app0&quot;:{&quot;configuration&quot;:{&quot;activePorts&quot;:[&quot;port3&quot;]}}}}}&#39;</span><span class="o">)</span>

response:
ifm3d_ros2.srv.Config_Response<span class="o">(</span><span class="nv">status</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">msg</span><span class="o">=</span><span class="s1">&#39;OK&#39;</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="using-the-config-file-parameter">
<h2>Using the <code class="docutils literal notranslate"><span class="pre">config_file</span></code> parameter<a class="headerlink" href="#using-the-config-file-parameter" title="Link to this heading"></a></h2>
<p>Additionally, it is possible to configure an application (or any other aspect of the system) using a configuration file, provided through the <code class="docutils literal notranslate"><span class="pre">config_file</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">ods_default_parameters.yaml</span></code> file.
This configuration file will be used to set the configuration in the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> transition of the node.
To re-configure a node using a new configuration file, the <code class="docutils literal notranslate"><span class="pre">on_configure</span></code> transition has to be triggered again.</p>
<section id="example-configuration">
<h3>Example Configuration<a class="headerlink" href="#example-configuration" title="Link to this heading"></a></h3>
<p>The default ODS parameters include a sample configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">/ifm3d/ods</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">config_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;config/o3r_configs/o3r_ods.json&quot;</span>
<span class="w">    </span><span class="c1"># ... other parameters</span>
</pre></div>
</div>
<p>The referenced JSON file (<code class="docutils literal notranslate"><span class="pre">config/o3r_configs/o3r_ods.json</span></code>) contains:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;ports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;port2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;processing&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;extrinsicHeadToUser&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;rotX&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;rotY&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.57</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;rotZ&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-1.57</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;transX&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;transY&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;transZ&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.35</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;applications&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;instances&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;app0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ods&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Standard ODS app&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ports&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;port2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;port6&quot;</span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CONF&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;configuration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;vo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;voPorts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;port2&quot;</span><span class="p">]</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;activePorts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;port2&quot;</span><span class="p">],</span>
<span class="w">          </span><span class="nt">&quot;zones&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;zoneCoordinates&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">[</span>
<span class="w">                </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">]</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="p">[</span>
<span class="w">                </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">]</span>
<span class="w">              </span><span class="p">],</span>
<span class="w">              </span><span class="p">[</span>
<span class="w">                </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span>
<span class="w">                </span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">]</span>
<span class="w">              </span><span class="p">]</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="path-resolution">
<h3>Path Resolution<a class="headerlink" href="#path-resolution" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Relative paths</strong>: If the <code class="docutils literal notranslate"><span class="pre">config_file</span></code> parameter contains a relative path (doesn’t start with <code class="docutils literal notranslate"><span class="pre">/</span></code>), it will be resolved relative to the <code class="docutils literal notranslate"><span class="pre">ifm3d_ros2</span></code> package share directory.</p></li>
<li><p><strong>Absolute paths</strong>: If the path starts with <code class="docutils literal notranslate"><span class="pre">/</span></code>, it will be used as-is.</p></li>
<li><p><strong>Empty parameter</strong>: If <code class="docutils literal notranslate"><span class="pre">config_file</span></code> is empty (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>), no configuration file will be loaded.</p></li>
</ul>
</section>
<section id="re-configuration">
<h3>Re-configuration<a class="headerlink" href="#re-configuration" title="Link to this heading"></a></h3>
<p>To apply a new configuration file:</p>
<ol class="arabic">
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">config_file</span></code> parameter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>param<span class="w"> </span><span class="nb">set</span><span class="w"> </span>/ifm3d/ods<span class="w"> </span>config_file<span class="w"> </span><span class="s2">&quot;path/to/new/config.json&quot;</span>
</pre></div>
</div>
</li>
<li><p>Trigger reconfiguration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>lifecycle<span class="w"> </span><span class="nb">set</span><span class="w"> </span>/ifm3d/ods<span class="w"> </span>configure
ros2<span class="w"> </span>lifecycle<span class="w"> </span><span class="nb">set</span><span class="w"> </span>/ifm3d/ods<span class="w"> </span>activate
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration file is only loaded during the <code class="docutils literal notranslate"><span class="pre">configure</span></code> transition. Changing the <code class="docutils literal notranslate"><span class="pre">config_file</span></code> parameter at runtime requires re-triggering the <code class="docutils literal notranslate"><span class="pre">configure</span></code> transition to take effect.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          
<html>
<head>
 
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="footer, address, phone, icons" />
 
	<title>Footer With Address And Phones</title>
	
	
 
</head>
 
	<body>
		
		<footer class="footer-distributed">
 
		<div class="footer-left">
 
		<p class="footer-links">
		<a href="index.html">Home</a>
	·
		<a href="http://www.o3r.ifm" target="_blank">Learn more</a>
	·
		<a href="/latest/_static/privacy-policy.html" target="_blank">Privacy Policy</a>

		</p>
 
		<p class="footer-company-name">ifm robotics &copy; 2023</p>
		</div>
		
		<div class="footer-center">
 
		<div>
		<i class="fa fa-envelope"></i>
		<p><a href="mailto:support.efector.object-ident@ifm.com">support.efector.object-ident@ifm.com</a></p>
		</div>
 
		</div>
 
		<div class="footer-right">
 
		<div class="footer-icons">
 
		<a href="https://www.facebook.com/ifmefector" target="_blank"><i class="fa fa-facebook"></i></a>
		<a href="https://twitter.com/ifm_USA" target="_blank"><i class="fa fa-twitter"></i></a>
		<a href="https://www.linkedin.com/showcase/ifm-efector" target="_blank"><i class="fa fa-linkedin"></i></a>
		<a href="https://github.com/ifm" target="_blank"><i class="fa fa-github"></i></a>
 
		</div>
 
		</div>
 
		</footer>
 
	</body>
 
</html>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>